<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Spectrum &#8212; pypvcell 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pypvcell 0.1 documentation" href="index.html" />
    <link rel="next" title="Module: photocurrent" href="photocurrent_m.html" />
    <link rel="prev" title="Pypvcell: An extensible programming framework for modeling solar cell" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pypvcell.spectrum">
<span id="spectrum"></span><h1>Spectrum<a class="headerlink" href="#module-pypvcell.spectrum" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Spectrum class is designed to simplify the unit conversions, interpolation and arithmetic operations of spectrum data in the form of <code class="docutils literal"><span class="pre">y(x)</span></code> or <code class="docutils literal"><span class="pre">y(x)dx</span></code>.
When modeling solar cells, we often have to deal with spectrum with different units. For example, the <code class="docutils literal"><span class="pre">x</span></code> of your EQE is in photon energy (eV), but the <code class="docutils literal"><span class="pre">x</span></code> of the illumination spectrum is in wavelength (nm), and you want to multiply them to get Jsc. You then have to convert the <code class="docutils literal"><span class="pre">x</span></code> of EQE into wavelength, reverse the sequence of both <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">y</span></code>, interpolate either the EQE or the illumination spectrum, convert <code class="docutils literal"><span class="pre">y</span></code> of the illumination spectrum into photon flux, multiply the data and finally run numerical integration to get Jsc. These processes can cause some headache and very error prone. <code class="docutils literal"><span class="pre">Spectrum</span></code> class aims to make these calculations robust and easy.</p>
<p>Spectrum class bundles the data of <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code> and their associated units together into an object. This design may look clumsy at first sight, but this helps reduce many potential errors that could happen when handling the unit conversions of the data. The reason is that the value of <code class="docutils literal"><span class="pre">y</span></code> is often coupled with the unit of <code class="docutils literal"><span class="pre">x</span></code>. For example, converting the <code class="docutils literal"><span class="pre">y</span></code> data from energy flux into photon flux requires the values of <code class="docutils literal"><span class="pre">x</span></code>.</p>
</div>
<div class="section" id="design-of-spectrum-class">
<h2>Design of <code class="docutils literal"><span class="pre">Spectrum</span></code> class<a class="headerlink" href="#design-of-spectrum-class" title="Permalink to this headline">¶</a></h2>
<p>An instance of <code class="docutils literal"><span class="pre">Spectrum</span></code> class bundles the following key properties of a spectrum y(x):</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">x_data</span></code>: the values of x</li>
<li><code class="docutils literal"><span class="pre">y_data</span></code>: the values of y</li>
<li><code class="docutils literal"><span class="pre">x_unit</span></code>: the unit of x (strings), e.g. &#8216;eV&#8217;, &#8216;nm&#8217;, &#8216;J&#8217; and so on.</li>
<li><code class="docutils literal"><span class="pre">y_area_unit</span></code> (optional): use this if the spectrum is something per area, such as sun irradiance (W/m^2), e.g., &#8216;m 2&#8217;)</li>
<li><code class="docutils literal"><span class="pre">is_spec_density</span></code>: a boolean value to specify whether the spectrum is y(x)dx. In other words, this should be set to <code class="docutils literal"><span class="pre">True</span></code> if the integration of y(x)dx is a physical quantity. For example, this should be set to <code class="docutils literal"><span class="pre">True</span></code> when dealing with the sun irradiance spectrum because the integration of the sun irradiance spectrum gives the total illumination power. On the other hand, this should be set to <code class="docutils literal"><span class="pre">False</span></code> for spectrum like quantum efficiency or absorption spectrum.</li>
<li><code class="docutils literal"><span class="pre">is_photon_flux</span></code>: This boolean values specifies whether the spectrum is photon flux.</li>
</ul>
</div>
<div class="section" id="access-the-values-in-spectrum">
<h2>Access the values in <code class="docutils literal"><span class="pre">Spectrum</span></code><a class="headerlink" href="#access-the-values-in-spectrum" title="Permalink to this headline">¶</a></h2>
<p>One can use <code class="docutils literal"><span class="pre">get_spectrum()</span></code> or <code class="docutils literal"><span class="pre">get_interp_spectrum()</span></code> to accessing the values of x and y in a spectrum. When retrieving the values of spectrum data, the user has to specify the unit for x. Both of these functions will handle the unit conversion and rearrange the order of x and y (say, when converting nm to eV).</p>
<p><code class="docutils literal"><span class="pre">get_spectrum()</span></code> returns the 2xL numpy array of the x and y data.</p>
<p><code class="docutils literal"><span class="pre">get_interp_spectrum()</span></code> returns the 2xL numpy array of interpolated x and y data from given x.</p>
</div>
<div class="section" id="arithmetic-operations">
<h2>Arithmetic operations<a class="headerlink" href="#arithmetic-operations" title="Permalink to this headline">¶</a></h2>
<p>Spectrum class supports arithmetic operations between different spectrum, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># Multiplication of two spectrum</span>
<span class="n">s3</span><span class="o">=</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span>
</pre></div>
</div>
<p>If s1 and s2 have different x, the function will interpolate s2 based on the values of x in s1.
After that, it does the multiplication of y in s1 and s2.</p>
<p>Spectrum calss also supports arithmetic operations with single float number, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># Multiply a spectrum by a single number</span>
<span class="n">s2</span><span class="o">=</span><span class="n">s1</span><span class="o">*</span><span class="mf">0.5</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">s2</span><span class="o">=</span><span class="mf">0.5</span><span class="o">*</span><span class="n">s1</span>
</pre></div>
</div>
<p>This operation multiply all the y values in s1 by 0.5 and return the result to s2.</p>
</div>
<div class="section" id="spectrum-class-api">
<h2>Spectrum class API<a class="headerlink" href="#spectrum-class-api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pypvcell.spectrum.Spectrum">
<em class="property">class </em><code class="descclassname">pypvcell.spectrum.</code><code class="descname">Spectrum</code><span class="sig-paren">(</span><em>x_data</em>, <em>y_data</em>, <em>x_unit</em>, <em>y_unit=''</em>, <em>is_spec_density=False</em>, <em>is_photon_flux=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypvcell/spectrum.html#Spectrum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypvcell.spectrum.Spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>This class handles the operation of the spectrum y(x), including unit conversion and multiplication.</p>
<p>It can handle unit conversions of different types of spectrum, including:</p>
<ul class="simple">
<li>Standard spectrum. The unit of y is independent of x, e.g. quantum efficiency, absorption spectrum, etc.</li>
<li>Sepctral density. The unit of y is per [x-unit]. For example, the Black-body radiation spectrum is often in the unit of energy/nm/m^2</li>
<li>Photon flux: y is number of photons. When converting y into energy (J), it has to be multiplied by its photon energy.</li>
</ul>
<dl class="method">
<dt id="pypvcell.spectrum.Spectrum.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>x_data</em>, <em>y_data</em>, <em>x_unit</em>, <em>y_unit=''</em>, <em>is_spec_density=False</em>, <em>is_photon_flux=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypvcell/spectrum.html#Spectrum.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypvcell.spectrum.Spectrum.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor of the spectrum y(x)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>is_spec_density</strong> &#8211; </li>
<li><strong>x_data</strong> &#8211; x data of the spectrum (1d numpy array)</li>
<li><strong>y_data</strong> &#8211; y data of the spectrum (1d numpy array)</li>
<li><strong>x_unit</strong> &#8211; the unit of x (string), e.g. &#8216;nm&#8217;, &#8216;eV&#8217;</li>
<li><strong>y_unit</strong> &#8211; (string) If y is per area, put area unit here, e.g. &#8216;m-2&#8217; or &#8216;cm-2&#8217;.
Put null string &#8216;&#8217; if y does not have area unit</li>
<li><strong>is_photon_flux</strong> &#8211; (boolean). True if y is number of photons.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypvcell.spectrum.Spectrum.convert_spectrum_unit">
<code class="descname">convert_spectrum_unit</code><span class="sig-paren">(</span><em>x_data</em>, <em>y_data</em>, <em>from_x_unit</em>, <em>to_x_unit</em>, <em>from_y_area_unit</em>, <em>to_y_area_unit</em>, <em>is_spec_density</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypvcell/spectrum.html#Spectrum.convert_spectrum_unit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypvcell.spectrum.Spectrum.convert_spectrum_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>A general method for converting the spectrum y(x) from one set of unit to another.
Note that this only supports the conversion of x from:
[length]&lt;-&gt;[frequency]
[length]&lt;-&gt; 1/[length]
[length]&lt;-&gt;[energy]</p>
<p>This is because Spectrum class converts the units of x to [length] first when initilizing or new spectrum is set.
Therefore this function only implments the bi-direction unit conversions that involves [length].</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_data</strong> &#8211; data of x (numpy array)</li>
<li><strong>y_data</strong> &#8211; data of y (numpy array)</li>
<li><strong>from_x_unit</strong> &#8211; the unit of x_data</li>
<li><strong>to_x_unit</strong> &#8211; the unit of x_data to be converted to</li>
<li><strong>from_y_area_unit</strong> &#8211; the unit of area of y_data</li>
<li><strong>to_y_area_unit</strong> &#8211; the unit of area of y_data tobe converted to</li>
<li><strong>is_spec_density</strong> &#8211; True if the data is spectral density.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a tuple of 1-d array (new_x_data, new_y_data)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypvcell.spectrum.Spectrum.get_interp_spectrum">
<code class="descname">get_interp_spectrum</code><span class="sig-paren">(</span><em>to_x_data</em>, <em>to_x_unit</em>, <em>to_y_area_unit=None</em>, <em>to_photon_flux=False</em>, <em>interp_left=None</em>, <em>interp_right=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypvcell/spectrum.html#Spectrum.get_interp_spectrum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypvcell.spectrum.Spectrum.get_interp_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Get interpolated spectrum.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>to_x_data</strong> &#8211; (ndarray) x values to be interpolated</li>
<li><strong>to_x_unit</strong> &#8211; (string) unit of x of the output value</li>
<li><strong>to_y_area_unit</strong> &#8211; (string) unit of area of y of the output value.</li>
<li><strong>to_photon_flux</strong> &#8211; (bool) True if converting the value to photon flux as the output</li>
<li><strong>interp_left</strong> &#8211; value to return for x &lt; core_x[0], return core_x[0] if set to be None</li>
<li><strong>interp_right</strong> &#8211; value to return for x&gt; core_x[-1], return core_y[-1] if set to be None</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a 2xL array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypvcell.spectrum.Spectrum.get_spectrum">
<code class="descname">get_spectrum</code><span class="sig-paren">(</span><em>to_x_unit</em>, <em>to_y_area_unit=None</em>, <em>to_photon_flux=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypvcell/spectrum.html#Spectrum.get_spectrum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypvcell.spectrum.Spectrum.get_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the values of the spectrum based on the given units of x and y.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>to_x_unit</strong> &#8211; the unit of x</li>
<li><strong>to_y_area_unit</strong> &#8211; the unit of area of y. Default is the y_area_unit of the object.</li>
<li><strong>to_photon_flux</strong> &#8211; True if converting y to photon flux.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a 2xL numpy array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pypvcell.spectrum.Spectrum.set_spectrum">
<code class="descname">set_spectrum</code><span class="sig-paren">(</span><em>x_data</em>, <em>y_data</em>, <em>x_unit</em>, <em>y_area_unit</em>, <em>is_photon_flux</em>, <em>is_spec_density</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypvcell/spectrum.html#Spectrum.set_spectrum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pypvcell.spectrum.Spectrum.set_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>This is essentially a constructor method that sets up the attributes of the object.
It converts everything to standard MKS unit. x_data: &#8216;m&#8217;, y_data: &#8216;[]/m^2-m&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_data</strong> &#8211; x data of the spectrum (1d numpy array)</li>
<li><strong>y_data</strong> &#8211; y data of the spectrum (1d numpy array)</li>
<li><strong>x_unit</strong> (<em>str</em>) &#8211; the unit of x (string), e.g. &#8216;nm&#8217;, &#8216;eV&#8217;</li>
<li><strong>y_area_unit</strong> (<em>str</em>) &#8211; If y is per area, put area unit here, e.g. &#8216;m**-2&#8217; or &#8216;cm**-2&#8217;. Put null string &#8216;&#8217; if y does not have area unit</li>
<li><strong>is_photon_flux</strong> (<em>bool</em>) &#8211; True if y is number of photons.</li>
<li><strong>is_spec_density</strong> (<em>bool</em>) &#8211; True if y is spectral density.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Spectrum</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#design-of-spectrum-class">Design of <code class="docutils literal"><span class="pre">Spectrum</span></code> class</a></li>
<li><a class="reference internal" href="#access-the-values-in-spectrum">Access the values in <code class="docutils literal"><span class="pre">Spectrum</span></code></a></li>
<li><a class="reference internal" href="#arithmetic-operations">Arithmetic operations</a></li>
<li><a class="reference internal" href="#spectrum-class-api">Spectrum class API</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Pypvcell: An extensible programming framework for modeling solar cell</a></li>
      <li>Next: <a href="photocurrent_m.html" title="next chapter">Module: photocurrent</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/spectrum_class.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Kan-Hua Lee.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/spectrum_class.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>